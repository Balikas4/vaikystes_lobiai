{% extends 'base.html' %}
{% load static %}

{% block title %}Maitinimas{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-text">
        <h1>Sveika ir subalansuota mityba</h1>
        <p>Darželyje vaikai maitinami mūsų virtuvėje pagaminu, plataus asortimento šviežiu maistu. Maisto racionas subalansuotas ir alergiškiems vaikams. Vaikai turi galimybę pasirinkti ir pakartoti norimo maisto. Dalyvaujame „Vaisių ir daržovių bei pieno ir pieno produktų vartojimo skatinimo vaikų ugdymo įstaigose“ programoje, kasdien užkandžiaujame šviežiais vaisiais bei termiškai neapdorotomis daržovėmis.</p>
    </div>
    <div class="hero-photo">
        <img src="{% static 'images/Sveikas_maistas.jpg' %}" alt="Hero Photo">
    </div>
</section>
<!-- Nutrition Section -->
<section id="nutrition">
    <h2>Weekly Nutrition</h2>
    <div class="nutrition-container">
        <div class="nutrition-wrapper">
            {% for week_number, daily_nutrition in weeks.items %}
                <div class="nutrition-item">
                    <h3>Savaitė {{ week_number }}</h3>
                    <div class="card-holder">
                        {% for day_nutrition in daily_nutrition %}
                            <div class="card">
                                <h4>{{ day_nutrition.day }}</h4>
                                {% for nutrient in day_nutrition.nutrients.all %}
                                    <li>
                                        {{ nutrient.name }}
                                    </li>
                                {% endfor %}
                            </div>
                        {% empty %}
                            <p>No nutrition data available for this week.</p>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="nutrition-navigation">
            <button class="nav-button prev">&lt;</button>
            <button class="nav-button next">&gt;</button>
        </div>
    </div>
</section>
<!-- Video  -->
<section>
    <h1>{{ video.title }}</h1>
    <div class="video-container">
        <div style="position: relative; overflow: hidden; padding-top: 56.25%;">
            <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;"
                    src="https://www.lrt.lt/mediateka/irasas/1013682460/stilius-2018-01-06?embed&time_start=1968"
                    frameborder="0" scrolling="no" allowfullscreen>
            </iframe>
        </div>
    </div>
</section>
<!-- Hero Button -->
<section class="hero-button">
    <div class="button-text">
        <a href="/register" class="registracija-button">Registracija</a>
        <p>Prisijunkite prie „Vaikystės lobių“!</p>
    </div>
</section>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const wrapper = document.querySelector('.nutrition-wrapper');
        const items = document.querySelectorAll('.nutrition-item');
        const prevButton = document.querySelector('.nav-button.prev');
        const nextButton = document.querySelector('.nav-button.next');
        const totalItems = items.length;
        let currentIndex = 0;

        function updateCarousel() {
            const translateX = -currentIndex * 100; // Move to the correct week
            wrapper.style.transform = `translateX(${translateX}%)`;
        }

        nextButton.addEventListener('click', () => {
            if (currentIndex < totalItems - 1) {
                currentIndex++;
            } else {
                currentIndex = 0; // Loop back to the first item
            }
            updateCarousel();
        });

        prevButton.addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
            } else {
                currentIndex = totalItems - 1; // Loop back to the last item
            }
            updateCarousel();
        });

        // Initialize carousel
        updateCarousel();
    });
</script>
{% endblock %}

