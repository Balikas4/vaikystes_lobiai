{% extends 'base.html' %}

{% load custom_filters %}
{% load static %}

{% block title %}About Us{% endblock %}

{% block content %}

<section class="hero">
    <div class="hero-photo">
        <img src="{{ about_us_page.hero_photo.url }}" alt="About Us Hero Image">
    </div>
    <div class="hero-text">
        <h1>{{ about_us_page.about_us_title }}</h1>
        <p>{{ about_us_page.about_us_description }}</p>
    </div>
</section>
<section>
    <div class="misija-vizija">
        <div class="vizija">
            <h1>Misija</h1>
            <p>Modernioje, veikti ir pažinti skatinančioje aplinkoje, sukuriame emociškai saugų, pagarbų, bendradarbiaujant su vaiku ir jo šeima grįstą ryšį, taip užtikriname motyvuojančią vaiko socialinę- emocinę ir pažintinę ūgtį, teikdami aukščiausios kokybės švietimo paslaugas.</p>
        </div>
        <div class="vizija">
            <h1>Vizija</h1>
            <p>Siekdami užtikrinti harmoningą vaikų asmenybės augimą, orientuojamės į šiuolaikinio ugdymo strategijas, inovatyvius vaikų ugdymo metodus, siekiame būti atviri naujovėms, mokomės konstruktyviai bendradarbiauti, nuolat atsinaujiname ir kuriame savitą, vertybėmis grįstą darželio ugdymo sistemą.</p>
        </div>
    </div>
</section>

<!-- Groups Section -->
<section id="groups">
    <h2>Our Groups</h2>
    <div class="grupes">
    {% for group in groups %}
        <div class="grupe">
            <h3>{{ group.name }}</h3>
            <p>{{ group.description }}</p>
        </div>
    {% empty %}
        <p>No groups available.</p>
    {% endfor %}
</section>

<!-- Daily Routine Section -->
<!-- Daily Routine Section -->
<section id="routines">
    <h2>Daily Routines</h2>
    <div class="routines-container">
        <div class="routines-wrapper">
            {% for group in groups %}
                <div class="group-routine">
                    <h3>{{ group.name }}</h3>
                    <div class="card-holder">
                        {% for day in days_of_week %}
                            {% with routine_data|get_item:group.id|get_item:day as routine %}
                                <div class="card">
                                    <h4>{{ day }}</h4>
                                    {% if routine %}
                                        {% for activity in routine.activities.all %}
                                            <li>
                                                {{ activity.name }}
                                                {% if activity.icon %}
                                                    <img src="{{ activity.icon.url }}" alt="{{ activity.name }} icon">
                                                {% endif %}
                                            </li>
                                        {% empty %}
                                            <li>No activities scheduled.</li>
                                        {% endfor %}
                                    {% else %}
                                        <p>No routine for this day.</p>
                                    {% endif %}
                                </div>
                            {% endwith %}
                        {% endfor %}
                    </div>
                </div>
            {% empty %}
                <p>No groups available.</p>
            {% endfor %}
        </div>
        <div class="routines-navigation">
            <button class="nav-button prev">&lt;</button>
            <button class="nav-button next">&gt;</button>
        </div>
    </div>
</section>


<!-- Team Section -->
<section id="team">
    <h2>Meet Our Team</h2>
    <div class="team-container">
        <div class="hero-text">
            <ul>
                {% for member in team_members %}
                    <li>
                        <strong>{{ member.name }}</strong> - {{ member.job_title }}
                    </li>
                {% empty %}
                    <p>No team members available.</p>
                {% endfor %}
            </ul>
        </div>
        <div class="hero-photo">
            <img src="{{ about_us_page.team_photo.url }}" alt="Team Photo" class="team-photo">
        </div>
    </div>
</section>

<!-- Hero Button -->
<section class="hero-button">
    <div class="button-text">
        <button>Registracija</button>
        <p>Prisijunkite prie „Vaikystės lobių“!</p>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const wrapper = document.querySelector('.routines-wrapper');
        const items = document.querySelectorAll('.group-routine');
        const prevButton = document.querySelector('.nav-button.prev');
        const nextButton = document.querySelector('.nav-button.next');
        const totalItems = items.length;
        let currentIndex = 0;

        // Set the width of the wrapper to show all items in a row
        wrapper.style.width = `${totalItems * 100}%`;

        // Each item takes up 100% of the container width
        items.forEach(item => {
            item.style.width = `${100 / totalItems}%`;
        });

        function updateCarousel() {
            const translateX = -currentIndex * (100 / totalItems);
            wrapper.style.transform = `translateX(${translateX}%)`;
        }

        nextButton.addEventListener('click', () => {
            if (currentIndex < totalItems - 1) {
                currentIndex++;
            } else {
                currentIndex = 0; // Loop back to the first item
            }
            updateCarousel();
        });

        prevButton.addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
            } else {
                currentIndex = totalItems - 1; // Loop back to the last item
            }
            updateCarousel();
        });

        // Initialize carousel
        updateCarousel();
    });
</script>
{% endblock %}
